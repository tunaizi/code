<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Earth and Venus</title>
    <style>
body { 
  margin: 0;
  background: #000;
}
svg { 
  display: block; 
  margin: 5vh auto;
  width: 90vmin;
  height: 90vmin;
}
#orbits circle {
  fill: none;
  stroke: #fff;
  stroke-width: 3px;
}
#lineGroup line {
  stroke-width: 1px;
}
#earth {
  fill: blue;
}
#venus {
  fill: hsl(60,80%,80%)
}
#sol {
  fill: yellow;
}
    </style>
</head>
<body>
<svg viewBox="0 0 500 500">
<desc>
Consider the orbits of Venus and Earth, which have an interesting relationship: for earth eight orbits of the Sun taken by the Earth, Venus orbits almost exactly 13 times, a condition known as _orbital resonance_. If the two planets start lined up with the Sun (known as _conjunction_) and their respective positions joined with a line at equal slices in time, the result will appear like a mandala, as shown in  orbital-resonance-figure.

The JavaScript moves the orbital positions of Venus and Earth, drawing a connective line between each new incremental position.
</desc>
    <g id="orbits">                                             <!--1-->
        <circle id="venusorbit" cx="250" cy="250" r="120" />
        <circle id="earthorbit" cx="250" cy="250" r="165" />
    </g>
    <g id="lineGroup" transform="rotate(-90 250 250)"></g>      <!--2-->
    <circle id="earth" cx="250" cy="85" r="8" />
    <circle id="venus" cx="250" cy="130" r="5" />
    <circle id="sol" cx="250" cy="250" r="16" />
</svg>
<!-- 
<1> The white circles for the orbits of the planets, placed at the "back" of the SVG so that everything else will be on "top".
<2> This group element will hold the line elements generated by JavaScript, rotated to allow the generated lines to match up with the position of the planets.
-->
<script>
const earthDeg = 5,                                             //1
earthOrbits = 8,
venusOrbits = 13,
resonance = earthOrbits / venusOrbits,
centre = 250,                                                   //2
earthDist = centre - parseInt(earth.getAttribute("cy"), 10),    //3
venusDist = centre - parseInt(venus.getAttribute("cy"), 10);
let i = 0,
orbitals = setInterval(function(){
  earth.setAttribute("transform", "rotate("+ i + " " + centre + " " + centre + ")");                                                  //4
   venus.setAttribute("transform", "rotate("+ i / resonance + " " + centre + " " + centre + ")");
  let earthX = Math.cos((i*Math.PI/180)) * earthDist + centre,  //5
  earthY = Math.sin((i*Math.PI/180)) * earthDist + centre;      
  venusX = Math.cos((i/(earthOrbits/13))*Math.PI/180) * venusDist + centre,
  venusY = Math.sin((i/(earthOrbits/13))*Math.PI/180) * venusDist + centre,
  resLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
  resLine.setAttribute('x1', earthX);
  resLine.setAttribute('y1', earthY);
  resLine.setAttribute('x2', venusX);
  resLine.setAttribute('y2', venusY);
  resLine.setAttribute('stroke', 'hsla(' + i + ', 50%, 50%, 0.5)');  
                                                                //6
  lineGroup.appendChild(resLine);		                        //7
  i += earthDeg;
	if (i == (360 * earthOrbits) + earthDeg) {
	  clearInterval(orbitals);                                  //8
	 }
}, 60);                                                         //9
/*

<1> The Earth circle will increment its orbit by five degrees each time.
<2> The center of the SVG (i.e. half the viewBox dimension)
<3> The distance of the Earth from the center of the SVG
<4> Rotates the Earth around the center of the SVG by the amount specified by `earthDeg`
<5> Together with the line following, finds the new position of the Earth, using trigonometry. 
<6> Sets the color of the generated line. Since HSL color does not care about the degree measurement (values greater than 360 continue _around_ the color wheel) `i` works.
<7> Adds the new line to the group.
<8> If the process has repeated enough times, exit, otherwiseâ€¦
<9> Repeat this process every 60 milliseconds

*/
</script>
</body></html>