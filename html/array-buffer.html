<!DOCTYPE html>
<html id="html" lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <script src="/study/js/filetype.js"></script>
  <!-- <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.13/vue.min.js"></script> -->
</head>
<style>
  :root {
    --block-size: 10px;
    --box-height: 30px;
  }

  label {
    display: block;
    width: 490px;
    height: 50px;
    border: 1px solid rgb(165, 152, 152);
    background-image: linear-gradient(45deg, #ddd 25%, #0000 25%),
      linear-gradient(-45deg, #ddd 25%, #0000 25%),
      linear-gradient(45deg, #0000 75%, #ddd 75%),
      linear-gradient(-45deg, #0000 75%, #ddd 75%);
    background-repeat: repeat;
    --block-size: calc((var(--box-height) - 8px) / 3);
    background-size: calc(var(--block-size) * 2) calc(var(--block-size) * 2);
    background-position: 0 0, 0 var(--block-size),
      var(--block-size) calc(-1 * var(--block-size)),
      calc(-1 * var(--block-size)) 0px;
  }
</style>

<body>
  <label for="uploads">choose</label>
  <input type="file" id="uploads" style="position: absolute; clip: rect(0 0 0 0)"
    accept=".gif,.jpg,.jpeg,.png,.bmp,.GIF,.JPG,.PNG,.json,.JSON,.js,.html" />
  <img id="myimg" src="" alt="" />
  <pre>
     <code id="mypre-code"></code?>
    </pre>
</body>
<script>
  window.onload = function () {
    function parseToDOM(str) {
      var div = document.createElement("div");
      if (typeof str == "string") div.innerHTML = str;
      return div.childNodes;
    }
    const getSize = (byteLength) => (Math.round((byteLength / 1024) * 100) / 100).toFixed(0) + "KB";
    const matchScripts = function (str) {
      let arr = [];
      let start = str.indexOf("<script");
      let end = str.indexOf("<\/script>");
      let matched = str.substring(start, end + 9);
      let lastNotMacth = String(str.substring(end + 9, str.length));
      let nextMatch = lastNotMacth.indexOf("<script") >= 0;
      matched && arr.push(matched);
      if (matched && nextMatch) {
        arr.push(...matchScripts(lastNotMacth));
      }
      return arr;
    };
    const HtmlDom = document.getElementById("html");
    const img = document.getElementById("myimg");
    const mypreCode = document.getElementById("mypre-code");
    const fileChangeFun = function ({ target }) {
      const file = target.files[0];
      const reader = new FileReader();
      let result = null;
      reader.onload = ({ target: tag }) => {
        result = String(tag.result);
        // if (typeof result === "object") {
        //   result = window.URL.createObjectURL(new Blob([]));
        // }
      };
      // reader.readAsArrayBuffer(file);
      // reader.readAsDataURL(file);
      reader.readAsText(file);
    };
    document.getElementById("uploads").onchange = fileChangeFun;
  };


  /**
  * let xhrScriptReg = /<script[^\n]*?(src="([^\n]*)")?[^\n]*?><\/script>/;
  * const contextScriptReg = /<script\s+[a-z]+="[^\n]*"\s*>([^<\/script>]*?)<\/script>/gims;
  * const xhrScriptReg = /<script\s+[a-z]+="[^\n]*"\s*><\/script>/gims;
  **/
</script>

</html>